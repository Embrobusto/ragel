
lex
	ignore /space+/
	literal '*', '(', ')', '!', ';\n'
	token id /[a-zA-Z_0-9]+/ 
end

def item 
	[id]
	{
		lhs = cons item ["( " ^r1 " )"]
	}
|	['(' item* ')']
	{
		lhs = cons item ["( " ^r2 " )"]
	}

def A 
	[] {
		print( 'A\n' )
	}

def B
	[] {
		print( 'B\n' )
	}

def start 
	[A item* '!']
|	[B item* ';\n']

parse Start: start[ stdin ]
print( Start.tree "\n" )
