lex start
{
	token id /[a-zA-Z_][a-zA-Z0-9_]*/
	literal '=', '<', '>', '/'
	ignore /[ \t\n\r\v]+/
}

def attr 
	[id '=' id]

def open_tag 
	['<' id attr* '>']

def close_tag
	['<' '/' id '>']

def tag 
	[open_tag item* close_tag]

def item
	[tag]
|	[id]

PersonTag: tag = parse tag( stdin )

match PersonTag 
	["<person name=" Val:id attr*">" item* "</person>"]

NameTag1: tag = construct tag 
	["<name type=person>" ^Val "</name>"]

NameTag2: tag = construct tag 
	"<name type=person>[^Val]</name>"

print( NameTag1 '\n' )
print( NameTag2 '\n' )

